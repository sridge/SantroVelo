<!DOCTYPE HTML>
<html>
	<head>

		<!--Stylesheet-->
		<link rel="stylesheet" href="Santro.css" type="text/css" media="screen" title="no title" charset="utf-8">

		<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		
	</head>
	<body>
	
	<h1 class="header">Member Database</h1>
	<p class="header">Test of a text box</p>
	
	<input id="searchBox" type="text" name="First and Last Name" class="form">
	<p id="print" class="header" onclick="addMember()"></p>

	</body>
	<script>
	
		//gdoc data test example
			var data = [ 
					{ 
						"name" : "Bob Smith",
						"date": "11/13/12", 
						"valid": "No"
					}
				];
				
		//enter a customer name and return their info
		//member is the JSON array derived from gdoc	
		function memberSearch(data) {
			var firstLast;
			var newMember;
			var results;
			
			firstLast = $("#searchBox").val().toLowerCase();
			newMember = $("#searchBox").val()

			for (var i = 0; i < data.length; i++) {
				//.toLowerCase santizes so name doesn't have to capitalized
				//.indexOf used so you can search by first or last name
				//.length, only starts to search if you have entered two characters
				if(data[i].name.toLowerCase().indexOf(firstLast) >= 0 && firstLast.length >= 2) {
					results = data[i].name + " | " + data[i].date + " | " + data[i].valid;
				//Display nothing if fewer than 2 characters entered		
				} else if (firstLast.length <= 1) {
					results = " ";			
				} else {
					results = "Not found, click to add \""+newMember+"\"";
				}
			}
			$("#print").html(results);
			
		   
		}
		//used to add members to the database
		//currently unfinished
		function addMember(data) {
			var newMember;
			
			newMember = $("#searchBox").val();
			
			var ans = confirm("are you sure you want to add "+ newMember + " as a new member?");
			
			if (ans == true) {
				alert(newMember +" is now a member!");
			} else {
				alert("re-type name to try again");
			}
		}
			
			
		$( "#searchBox" ).keyup(function() {
			memberSearch(data);
		})

	</script>
</html>
