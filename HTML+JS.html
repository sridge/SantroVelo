<!DOCTYPE HTML>
<html>
	<head>

		<!--Stylesheet-->
		<link rel="stylesheet" href="Santro.css" type="text/css" media="screen" title="no title" charset="utf-8">

		<script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
		
	</head>
	<body>
	<div class="boxtext">
	<img src="logo.jpg" alt="Our Logo" height="331" width="346">
	</div>
	
	<input id="searchBox" type="text" name="First and Last Name" class="boxes">
	<br>
	<div class="names">
	<p id="print" onclick="addMember()"></p>
	</div>

	</body>
	<script>
	
		//gdoc data test example
			var data = [ 
					{ 
						"name" : "Thisisalong Namedperson",
						"date": "11/13/12", 
						"valid": "X", 
					},
					{ 
						"name" : "Sean Smith", 
						"date": "11/09/12", 
						"valid": " ",
					},
					{ 
						"name" : "Sean Smith", 
						"date": "11/10/12", 
						"valid": "X",
					},
					{ 
						"name" : "Billy Smith", 
						"date": "11/11/12", 
						"valid": " ",
					},
					{ 
						"name" : "Sean Smith", 
						"date": "11/12/12", 
						"valid": "X",
					},
					{ 
						"name" : "Sean Smith", 
						"date": "11/13/12", 
						"valid": "X",
					},
					{ 
						"name" : "Sean Smith", 
						"date": "11/15/12", 
						"valid": "X",
					},
				];
				
		//enter a customer name and return their info
		//member is the JSON array derived from gdoc	
		function memberSearch(data) {
			console.log("asd")
			var firstLast;
			var newMember;
			var results;
			
			
			firstLast = $("#searchBox").val().toLowerCase();
			newMember = $("#searchBox").val()
			results = ""

			for (var i = 0; i < data.length; i++) {
				//.toLowerCase santizes so name doesn't have to capitalized
				//.indexOf used so you can search by first or last name
				//.length, only starts to search if you have entered two characters
				if(data[i].name.toLowerCase().indexOf(firstLast) >= 0 && firstLast.length >= 2) {
					results += data[i].name + "&nbsp;&nbsp;&nbsp;" + data[i].date + "&nbsp;&nbsp;&nbsp;" + data[i].valid + "\<br>";	
					
				}
				} 
				
			if (results == "" && firstLast.length >= 2){
					results = "Not found, click to add \""+newMember+"\"";
				}
		
			$("#print").html(results);
		}

		//used to add members to the database
		//currently unfinished
		function addMember(data) {
			var newMember;
			
			newMember = $("#searchBox").val();
			
			var ans = confirm("are you sure you want to add "+ newMember + " as a new member?");
			
			if (ans == true) {
				alert(newMember +" is now a member!");
			} else {
				alert("re-type name to try again");
			}
		}
			
			
		$( "#searchBox" ).keyup(function() {
			memberSearch(data);
		})

	</script>
</html>

